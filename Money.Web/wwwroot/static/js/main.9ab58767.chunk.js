(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{172:function(e,t,n){e.exports=n(339)},177:function(e,t,n){},339:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(3),u=n.n(c),o=n(65),s=n(17),i=n(342),l=n(344),f=(n(119),n(5)),p=(n(177),function(){return a.a.createElement("div",{className:"header-container"},a.a.createElement(o.b,{to:"/",className:"header-homelink"},a.a.createElement("div",null,a.a.createElement(f.a,{type:"home"})," Ekonomi")),a.a.createElement(o.b,{to:"/edit",className:"header-editlink"},"\xc4ndra"))}),m=n(7),d=n.n(m),v=n(20),x=n(29),h=n(340),E=function(e){var t=e.expenses,n=[{title:"Datum",dataIndex:"date",key:"date",render:function(e){return a.a.createElement("div",null,e.format("YYYY-MM-DD"))},sorter:function(e,t){return e.date.diff(t.date)}},{title:"Beskrivning",dataIndex:"description",key:"description"},{title:"Belopp",dataIndex:"amount",key:"amount",render:function(e){return a.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},Intl.NumberFormat("sv-se",{minimumFractionDigits:2}).format(e))},sorter:function(e,t){return e.amount-t.amount}}];return a.a.createElement(i.a,{style:{marginTop:36}},a.a.createElement(l.a,{span:24},a.a.createElement(h.a,{dataSource:t,columns:n,rowKey:"id"})))},b=n(47),g=n(341),y=n(343),k=n(33),j=n.n(k),w={fetchExpenses:function(){var e=Object(v.a)(d.a.mark((function e(t){var n,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t?"/expenses?filter="+t:"/expenses",e.next=4,fetch(n);case 4:return r=e.sent,e.next=7,r.json();case 7:return(a=e.sent).forEach((function(e){return e.date=j.a.utc(e.date)})),e.abrupt("return",a);case 12:return e.prev=12,e.t0=e.catch(0),console.log("Error fetching expenses: ",e.t0.message),e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),deleteExpense:function(){var e=Object(v.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/expenses?id="+t,{method:"DELETE"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error deleting expense: ",e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),fetchFilters:function(){var e=Object(v.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/filters");case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.prev=10,e.t0=e.catch(0),console.log("Error fetching filters: ",e.t0.message),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),addFilter:function(){var e=Object(v.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/filters?text="+t,{method:"PUT"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error adding filter: ",e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),deleteFilter:function(){var e=Object(v.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/filters?id="+t,{method:"DELETE"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("Error deleting filter: ",e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),uploadFiles:function(){var e=Object(v.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=new FormData,r=0;r<t.length;r++)n.append("files",t[r]);return e.next=5,fetch("/upload",{method:"POST",body:n});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error uploading files: ",e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},O=function(e){var t=e.setExpenses,n=Object(r.useState)(""),c=Object(x.a)(n,2),u=c[0],o=c[1],s=Object(r.useState)(!1),f=Object(x.a)(s,2),p=f[0],m=f[1],h=Object(r.useState)(!1),E=Object(x.a)(h,2),k=E[0],j=E[1],O=Object(r.useState)([]),D=Object(x.a)(O,2),F=D[0],I=D[1];Object(r.useEffect)((function(){Y()}),[]);var S=function(){var e=Object(v.a)(d.a.mark((function e(n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),t([]),e.next=4,w.fetchExpenses(n);case 4:r=e.sent,t(r),m(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(v.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,w.fetchFilters();case 3:t=e.sent,I(t),j(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.a.createElement("div",null,a.a.createElement(i.a,{type:"flex",justify:"center",gutter:8,style:{marginTop:36}},a.a.createElement(l.a,null,a.a.createElement(b.a,{icon:"save",loading:k,onClick:Object(v.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.addFilter(u);case 2:return e.next=4,Y();case 4:case"end":return e.stop()}}),e)})))})),a.a.createElement(l.a,{xs:16,md:10},a.a.createElement(g.a.Search,{placeholder:"S\xf6kord..",enterButton:!0,value:u,loading:p,onChange:function(e){return o(e.target.value)},onSearch:function(){return S(u)}}))),a.a.createElement(i.a,{type:"flex",justify:"center",gutter:4},F.map((function(e){return a.a.createElement(y.a,{key:e.id,style:{marginTop:8},closable:!0,onClick:Object(v.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o(e.text),t.next=3,S(e.text);case 3:case"end":return t.stop()}}),t)}))),onClose:Object(v.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.deleteFilter(e.id);case 2:return t.next=4,Y();case 4:case"end":return t.stop()}}),t)})))},e.text)}))))},D=n(117),F=n(112),I=n(167),S=n.n(I),Y=function(e){return e.map((function(t){return{id:t.id,date:j.a.utc(t.date),description:t.description,amount:t.amount,askIfDuplicate:!0!==t.notDuplicate&&T(t,e)}}))},T=function(e,t){return t.filter((function(t){return t.amount===e.amount&&t.description===e.description&&t.date.isSame(e.date)})).length>1},M=function(e){var t=function(e){return e.reduce((function(e,t){var n=parseInt(t.date.format("YYYYMM"));return e[n]=e[n]||0,e[n]=e[n]+t.amount,e}),[])}(e.expenses),n={chart:{type:"column",marginTop:40,animation:!1},title:{text:""},legend:{enabled:!1},credits:{enabled:!1},exporting:{enabled:!1},tooltip:{formatter:function(){var e=Intl.NumberFormat("sv-se",{style:"currency",currency:"SEK",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.y);return this.x+" <b>"+e+"</b>"}},xAxis:{type:"category",categories:Object(D.a)(Object.keys(t)).map((function(e){return j.a.utc(e+"01").format("MMM YYYY")})),tickInterval:3},yAxis:{title:void 0,labels:{format:"{value} kr"}},series:[{type:"column",data:Object(D.a)(Object.values(t)).map((function(e){return{y:e}}))}]};return a.a.createElement(i.a,null,a.a.createElement(S.a,{highcharts:F,options:n}))},B=n(158),C=function(){var e=Object(r.useState)([]),t=Object(x.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(!1),o=Object(x.a)(u,2),s=o[0],l=o[1],f=function(){var e=Object(v.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),l(!0),e.next=4,w.uploadFiles(t.dataTransfer.files);case 4:l(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.createElement(i.a,{onDragOver:function(e){return e.preventDefault()},onDragEnd:function(e){return e.dataTransfer.clearData()},onDrop:f},a.a.createElement(B.a,{spinning:s},a.a.createElement(O,{setExpenses:c}),n.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement(M,{expenses:n}),a.a.createElement(E,{expenses:n}))))},N=function(){var e=Object(r.useState)([]),t=Object(x.a)(e,2),n=t[0],c=t[1],u=Object(r.useState)(!1),o=Object(x.a)(u,2),s=o[0],f=o[1];Object(r.useEffect)((function(){p()}),[]);var p=function(){var e=Object(v.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,w.fetchExpenses();case 3:t=e.sent,c(Y(t)),f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(v.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.deleteExpense(t);case 2:p();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=[{title:"Datum",dataIndex:"date",key:"date",render:function(e){return a.a.createElement("div",null,e.format("YYYY-MM-DD"))},sorter:function(e,t){return e.date.diff(t.date)}},{title:"Beskrivning",dataIndex:"description",key:"description"},{title:"Belopp",dataIndex:"amount",key:"amount",render:function(e){return a.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},Intl.NumberFormat("sv-se",{minimumFractionDigits:2}).format(e))},sorter:function(e,t){return e.amount-t.amount}},{title:"Dublett",dataIndex:"askIfDuplicate",key:"askIfDuplicate",render:function(e,t){return!0===e?a.a.createElement(b.a,{onClick:function(){return m(t.id)}},"Ta bort"):void 0},sorter:function(e,t){return e.askIfDuplicate?1:-1}}];return a.a.createElement(i.a,null,a.a.createElement(l.a,{span:24},a.a.createElement(h.a,{dataSource:n,columns:E,rowKey:"id",loading:s})))},A=(n(338),function(){return j.a.locale("sv"),a.a.createElement(o.a,null,a.a.createElement("div",{className:"App"},a.a.createElement(i.a,null,a.a.createElement(l.a,{xs:0,md:2}),a.a.createElement(l.a,{xs:24,md:20},a.a.createElement(p,null),a.a.createElement(s.a,{path:"/",exact:!0,component:C}),a.a.createElement(s.a,{path:"/edit",component:N})),a.a.createElement(l.a,{xs:0,md:2}))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[172,1,2]]]);
//# sourceMappingURL=main.9ab58767.chunk.js.map